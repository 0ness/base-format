<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>common/js/lib/PageInfo.js - js-document</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="js-document" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/BreakPointOne.html">BreakPointOne</a></li>
                                <li><a href="../classes/Library.html">Library</a></li>
                                <li><a href="../classes/PageInfo.html">PageInfo</a></li>
                                <li><a href="../classes/Planet.html">Planet</a></li>
                                <li><a href="../classes/ScrollFire.html">ScrollFire</a></li>
                                <li><a href="../classes/ScrollFireDom.html">ScrollFireDom</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: common/js/lib/PageInfo.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * OS・UA・ページの情報を取得・操作する
 * ・コンストラクタで情報を取得し、インスタンスの変数から参照する
 * ・OS・UA・デバイス判定
 * ・css読み込み・viewport表示変更
 * @class PageInfo
 * @constructor
 * @example var obj = new PageInfo();
 * if(obj.isMobile === true) return false;
 */
function PageInfo() {
    var _t = this;
    _t.checkUA();
    _t.checkDevice();
};
PageInfo.prototype = {

    /**
     * 閲覧環境：OS
     * @property {String} OS
     */
    OS: &quot;&quot;,
    /**
     * 閲覧環境：ユーザーエージェント
     * @property {String} UA
     */
    UA: &quot;&quot;,
    /**
     * 閲覧環境：ieのバージョン
     * @property {String} IEver
     */
    IEver: &quot;not IE&quot;,
    /**
     * 閲覧環境：Flashプレーヤー判定
     * Flashプレーヤーの有無を確認
     * @property {Boolean} isFlash
     */
    isFlash: false,
    /**
     * 閲覧環境：モバイル判定
     * 判定の範囲は随時更新する
     * @property {Boolean} isMobile
     */
    isMobile: false,
    /**
     * 閲覧環境：デバイスの種類
     * @property {String} device
     */
    device: &quot;pc&quot;,
    /**
     * ページ情報：閲覧しているページのbody要素のid
     * サイト毎で起点となる要素は変更する
     * @property {String} id
     */
    id: &quot;&quot;,
    /**
     * ページ情報：閲覧しているページのbody要素のclass
     * サイト毎で起点となる要素は変更する
     * @property {String} className
     */
    className: &quot;&quot;,
    /**
     * ページ情報：URL内のクエリの有無
     * @property {Boolean} hasQuery
     */
    hasQuery: &quot;&quot;,
    /**
     * ページ情報：URL内のクエリの内容
     * @property {String} urlQuery
     */
    urlQuery: &quot;&quot;,


    /**
     * IDの取得（IEの場合はwrapperにIE追加）
     * @method getID
     */
    getID: function() {
        var _t = this,
            _bodys = document.getElementsByTagName(&quot;body&quot;)[0],
            _classStr = _t.UA;

        _t.id = _bodys.getAttribute(&#x27;id&#x27;);
        _t.className = _bodys.className;
    },

    /** 
     * OSチェック
     * @method checkOS
     */
    checkOS: function() {
        if (navigator.platform.indexOf(&quot;Win&quot;) != -1) this.OS = &quot;windows&quot;;
        else this.OS = &quot;mac&quot;;
    },

    /**
     * UserAgentチェック
     * @method checkUA
     */
    checkUA: function() {
        var _t = this,
            _d = document,
            _UA = &quot;&quot;,
            _UAver = &quot;&quot;,
            _wn = window.navigator,
            _wnUA = _wn.userAgent.toLowerCase(),
            _wnVer = _wn.appVersion.toLowerCase();

        //ブラウザ確認
        if (_wnUA.indexOf(&quot;msie&quot;) !== -1) {
            _UA = &quot;ie&quot;;
            if (_wnVer.indexOf(&quot;msie 8.&quot;) !== -1) _UAver = &#x27;ie8&#x27;;
            else if (_wnVer.indexOf(&quot;msie 9.&quot;) !== -1) _UAver = &quot;ie9&quot;;
            else if (_wnVer.indexOf(&quot;msie 7.&quot;) !== -1) _UAver = &#x27;ie7&#x27;;
            else if (_wnVer.indexOf(&quot;msie 6.&quot;) !== -1) _UAver = &#x27;ie6&#x27;;
            else _UAver = &quot;ie10&quot;;
        } else if (_wnUA.indexOf(&#x27;trident/7&#x27;) !== -1) {
            _UA = &quot;ie&quot;;
            _UAver = &#x27;ie11&#x27;;
        } else {
            if (_wnUA.indexOf(&quot;firefox&quot;) !== -1) _UA = &quot;firefox&quot;;
            else _UA = &quot;webkit&quot;;
        };

        if (_UAver === &quot;ie8&quot; || _UAver === &quot;ie9&quot;) _d.getElementById(&quot;wrapper&quot;).className = _UAver;
        //互換モード対応
        if (_d.documentMode === 8) _d.getElementById(&quot;wrapper&quot;).className = &quot;ie8&quot;;

        //値をプロパティに帰属させる
        _t.UA = _UA;
        _t.IEver = _UAver;
    },

    /**
     * PC・モバイル　デバイス・UAチェック
     * @method checkDevice
     */
    checkDevice: function() {
        var _t = this,
            _device = &quot;pc&quot;,
            _deviceUA = navigator.userAgent,
            _isMobile = false;

        if ((_deviceUA.indexOf(&#x27;Android&#x27;) &gt; 0 &amp;&amp; _deviceUA.indexOf(&#x27;Mobile&#x27;) == -1) || _deviceUA.indexOf(&#x27;A1_07&#x27;) &gt; 0 || _deviceUA.indexOf(&#x27;SC-01C&#x27;) &gt; 0 || _deviceUA.indexOf(&#x27;iPad&#x27;) &gt; 0) {
            _isMobile = true;
            _device = &quot;tablet&quot;;
        } else if ((_deviceUA.indexOf(&#x27;iPhone&#x27;) &gt; 0 &amp;&amp; _deviceUA.indexOf(&#x27;iPad&#x27;) == -1) || _deviceUA.indexOf(&#x27;iPod&#x27;) &gt; 0 || (_deviceUA.indexOf(&#x27;Android&#x27;) &gt; 0 &amp;&amp; _deviceUA.indexOf(&#x27;Mobile&#x27;) &gt; 0)) {
            _isMobile = true;
            _device = &quot;sp&quot;;
        };

        _t.device = _device;
        _t.isMobile = _isMobile;
    },

    /**
     * Flashプレーヤーの有無をチェック
     * @method checkFlash
     */
    checkFlash: function() {
        var isFlashInstalled = function() {
            if (navigator.plugins[&quot;Shockwave Flash&quot;]) {
                return true;
            }
            try {
                new ActiveXObject(&quot;ShockwaveFlash.ShockwaveFlash&quot;);
                return true;
            } catch (e) {
                return false;
            }
        }();
        return isFlashInstalled &amp;&amp; !$.device(&quot;android&quot;) ? true : false;
    },

    /**
     * クエリチェック
     * @method checkURLQuery
     */
    checkURLQuery: function() {
        var _t = this,
            _queryLen = location.search;
        if (_queryLen.length === 0) return false;
        _t.hasQuery = true;
        _t.urlQuery = _queryLen.substr(1).split(&quot;&amp;&quot;).toString();
    },

    /**
     * PC用css記述
     * @method setPcCSS
     * @param   {String} _path cssファイルのパス
     */
    setPcCSS: function(_path) {
        if (this.isMobile === true) return false;
        var _doc = document,
            _link = _doc.createElement(&#x27;link&#x27;);
        _link.href = _path;
        _link.type = &#x27;text/css&#x27;;
        _link.rel = &#x27;stylesheet&#x27;;
        _doc.getElementsByTagName(&#x27;head&#x27;).item(0).appendChild(_link);
    },

    /**
     * モバイル用css記述
     * @method setMobileCSS
     * @param   {String}  _path cssファイルのパス
     */
    setMobileCSS: function(_path) {
        if (this.isMobile === false) return false;
        var _doc = document,
            _link = _doc.createElement(&#x27;link&#x27;);
        _link.href = _path;
        _link.type = &#x27;text/css&#x27;;
        _link.rel = &#x27;stylesheet&#x27;;
        _doc.getElementsByTagName(&#x27;head&#x27;).item(0).appendChild(_link);
    },

    /**
     * viewport記述
     * @method setViewPort
     * @param {Number} _width ビューポートの指定値
     */
    setViewPort: function(_width) {
        var _doc = document,
            _property = (this.isMobile === true) ? &#x27;width=device-width&#x27; : &#x27;width=&#x27; + _width + &#x27;px&#x27;,
            _meta = _doc.createElement(&#x27;meta&#x27;);
        _meta.setAttribute(&#x27;name&#x27;, &#x27;viewport&#x27;);
        _meta.setAttribute(&#x27;content&#x27;, _property);
        _doc.getElementsByTagName(&#x27;head&#x27;)[0].appendChild(_meta);
    }
}
    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
